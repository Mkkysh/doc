{"openapi":"3.0.0","info":{"title":"Albums store","description":"Add your description","license":{"name":"MIT","url":""},"termsOfService":"","version":"1.0.0"},"servers":[],"security":[{"BasicAuth":[]}],"components":{"securitySchemes":{"BasicAuth":{"type":"http","scheme":"basic"}},"schemas":{"Key":{"description":"/*.js',\r/ URL where SwaggerUI will be rendered\r\nswaggerUIPath: '/api-docs',\r\n// Expose OpenAPI UI\r\nexposeSwaggerUI: true,\r\n// Expose Open API JSON Docs documentation in `apiDocsPath` path.\r\nexposeApiDocs: true,\r\n// Open API JSON Docs endpoint.\r\napiDocsPath: '/v3/api-docs',\r\n// Set non-required fields as nullable by default\r\nnotRequiredAsNullable: false,\r\n// You can customize your UI options.\r\n// you can extend swagger-ui-express config. You can checkout an example of this\r\n// in the `example/configuration/swaggerOptions.js`\r\nswaggerUiOptions: {},\r\n// multiple option in case you want more that one instance\r\nmultiple: true,\r\n};\r\n\r\n\r\nvar transporter = nodemailer.createTransport({\r\nservice: 'Mail.ru',\r\nauth:{\r\nuser: 'notify@kiitoys.ru',\r\npass: '5wfnjR3tPKu5xfDju9dJ',\r\n}\r\n})\r\n\r\nvar mailOptions = {}\r\n\r\nconst storage = multer.diskStorage({\r\ndestination: function (req, file, cb) {\r\ncb(null, \"uploads/\");\r\n},\r\nfilename: function (req, file, cb) {\r\nconst uniqueSuffix = Date.now() + \"-\" + Math.round(Math.random() * 1e9);\r\ncb(\r\nnull,\r\nfile.originalname.split(\".\")[0] +\r\nuniqueSuffix +\r\n\".\" +\r\nfile.originalname.split(\".\")[1]\r\n);\r\n},\r\n});\r\n\r\nconst upload = multer({ storage: storage });\r\n\r\nconst adminInfo = {\r\nlogin: \"admin\",\r\npassword: \"admin\",\r\n};\r\n\r\nconst app = express();\r\n\r\nconst PORT = 3000;\r\n\r\nexpressJSDocSwagger(app)(options);\r\n\r\napp.use(cors());\r\n\r\napp.use(bodyParser({ limit: \"400mb\" }));\r\n\r\napp.use(express.static(__dirname + \"/dist/kii-toys-front/\"));\r\nvar connection = mysql.createPool({});\r\n\r\nconst jsonParser = express.json();\r\nconst rawParser = express.raw();\r\n\r\n// app.use(fileupload({}))\r\n\r\nif (process.argv[2] === \"--dev\") {\r\n// dev\r\nconsole.log(\"running in dev mode\");\r\nconnection = mysql.createPool({\r\nconnectionLimit: 10,\r\nhost: \"127.0.0.1\",\r\nuser: \"root\",\r\ndatabase: \"KiiToys\",\r\npassword: \"root\",\r\nport: 3306,\r\nmultipleStatements: true,\r\n});\r\n} else {\r\n// prod\r\nisProd = true;\r\nconsole.log(\"running in prod mode\");\r\nconnection = mysql.createPool({\r\nconnectionLimit: 10,\r\nhost: \"localhost\",\r\nuser: \"root\",\r\ndatabase: \"KiiToys\",\r\npassword: \"strongPassword123@\",\r\nport: 3306,\r\nmultipleStatements: true,\r\n});\r\n}\r\n\r\n/**\r\nA Key","type":"object","properties":{"key":{"description":"ключ","$ref":"#/components/schemas/any"}}},"Login":{"description":"A Login","type":"object","properties":{"phone":{"description":"","type":"string"},"password":{"description":"","type":"string"}}},"Category":{"description":"A Category","required":["name"],"type":"object","properties":{"name":{"description":"название","type":"string"},"description":{"description":"описание","$ref":"#/components/schemas/description"}}},"Cart_Good":{"description":"A Cart_Good","type":"object","properties":{"id":{"description":"-id товара_цвет","type":"number"},"name":{"description":"название","type":"string"},"image":{"description":"навзание файла картинки","type":"string"},"price":{"description":"цена","type":"number"},"oldPrice":{"description":"старая цена","type":"number"},"isAvailable":{"description":"доступность","type":"boolean"},"amountAvailable":{"description":"кол-во доступных","type":"number"}}},"Cart":{"description":"A Cart","type":"object","properties":{"title":{"description":"название","type":"string"},"description":{"description":"описание","$ref":"#/components/schemas/description"},"type":{"description":"новый","type":"string"},"id":{"description":"id товара","type":"number"},"colors":{"description":"","type":"array","items":{"$ref":"#/components/schemas/Cart_Good"}}}}}},"paths":{"/api/user/login":{"post":{"deprecated":false,"summary":"Авторизация","security":[],"responses":{"200":{"description":"успешная авторизация","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Key"}}}},"404":{"description":"плохой запрос","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Key"}}}}},"parameters":[],"tags":["user"],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Login"}}},"description":"данные пользователя","required":true}}},"/api/admin/category":{"post":{"deprecated":false,"summary":"Добваление категорий товара","security":[],"responses":{"200":{"description":"добавление категории","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Key"}}}},"404":{"description":"плохой запрос","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Key"}}}}},"parameters":[],"tags":["category"],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Category"}}},"description":"описание","required":true}},"get":{"deprecated":false,"summary":"получение категорий","security":[],"responses":{"200":{"description":"категории","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}},"404":{"description":"плохой запрос","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Key"}}}}},"parameters":[],"tags":["category"]}},"/api/user/good/cart":{"post":{"deprecated":false,"summary":"получение корзины","security":[],"responses":{"200":{"description":"корзина","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Cart"}}}}},"404":{"description":"плохой запрос","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Key"}}}}},"parameters":[],"tags":["goods"],"requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"type":"number"}}}},"description":"массив id товаров в корзине","required":true}}},"/api/user/good/:id":{"get":{"deprecated":false,"summary":"получение товара","security":[],"responses":{"200":{"description":"объект товара","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Cart"}}}},"404":{"description":"плохой запрос","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Key"}}}}},"parameters":[{"name":"id","in":"path","description":"идентификатор товара","required":false,"deprecated":false,"schema":{"type":"string"}}],"tags":["goods"]}}},"tags":[{"name":"category","description":""},{"name":"goods","description":""},{"name":"user","description":""}]}